<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layouts/layout}">
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poetsen+One&display=swap" rel="stylesheet" />
  <div layout:fragment="content">
    <div>
      <form class="d-flex" role="search" id="searchForm">
        <!-- 검색 후 결과 페이지는 1로 보여주기 -->
        <input type="hidden" name="page" value="1" />
        <select name="type" id="type" class="form-select me-2">
          <option value="" th:selected="${requestDto.type == null}">조건 선택</option>
          <option value="c" th:selected="${requestDto.type == 'oNm'}">관할기관(시,도)</option>
          <option value="t" th:selected="${requestDto.type == 'oNmC'}">관할기관(시,군,구)</option>
        </select>
        <input
          class="form-control me-2"
          type="search"
          placeholder="Search"
          aria-label="Search"
          name="keyword"
          id="keyword"
          th:value="${requestDto.keyword}"
        />
        <!-- search 클릭 시, keword, type - requestdto로 넘어감 -->
        <button class="btn btn-outline-success" type="submit">Search</button>
      </form>
    </div>

    <body>
      <div class="wrap">
        <div class="container">
          <div class="row">
            <div class="col-md-6 d-flex align-items-center">
              <p class="mb-0 phone pl-md-2"></p>
            </div>
          </div>
        </div>
      </div>

      <section class="ftco-section bg-light">
        <div class="container">
          <div class="row">
            <div class="col-md-6 col-lg-3 ftco-animate" th:each="dto : ${result.dtoList}">
              <div class="staff">
                <div class="img-wrap d-flex align-items-stretch">
                  <img class="img align-self-stretch" th:src="${dto.popfile}"></img>
                </div>
                <div class="text pt-3 px-3 pb-4 text-center" >
                  <h3></h3>
                  <span class="position mb-2"></span>
                  <div class="faded">
                    <tr>
                      <th scope="col" th:text="${dto.noticeNo}"></th>
                      <th scope="col" th:text="${careNm}"></th>
                      <th scope="col" th:text="${kindCd}"></th>
                    </tr>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-center">
          <li class="page-item" th:if="${result.prev}">
            <a class="page-link" th:href="@{list(page=${result.start-1}, type=${requestDto.type}, keyword=${requestDto.keyword})}">Previous</a>
          </li> 
          <!-- 현재 선택된 페이지 번호에 포인터 -->
          <li th:class="'page-item ' + ${result.page == page ? 'active' : ''}" th:each="page : ${result.pageList}">
            <a class="page-link" th:text="${page}" th:href="@{list(page=${page}, type=${requestDto.type}, keyword=${requestDto.keyword})}"></a>
          </li>
          <!-- result.next 값에 따라 -->
          <li class="page-item" th:if="${result.next}">
            <a class="page-link" th:href="@{list(page=${result.end+1}, type=${requestDto.type}, keyword=${requestDto.keyword})}">Next</a>
          </li>
      </nav>
    </body>
  </div>
</html>
